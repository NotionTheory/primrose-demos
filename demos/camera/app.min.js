function errorHandler(e){return function(n){console.error(e,n)}}var env=new Primrose.BrowserEnvironment({useFog:!0,groundTexture:8355711,backgroundColor:16777215,fullScreenButtonContainer:"#fullScreenButtonContainer"}),cam=hub(),ready=navigator.mediaDevices.enumerateDevices().catch(errorHandler("ERR [enumerating devices]:>")).then(function(e){return e.filter(function(e){return"videoinput"===e.kind})}).then(function(e){if(0===e.length)throw new Erorr("No cameras!");return e[e.length-1]}).catch(errorHandler("ERR [filtering devices]:>")).then(function(e){return navigator.mediaDevices.getUserMedia({video:{deviceId:e.deviceId,width:{ideal:640},height:{ideal:480}}})}).catch(errorHandler("ERR [getting media access]:>")).then(function(e){return console.log(e),new Primrose.Controls.Video(e,{width:1,height:.75,unshaded:!0,transparent:!0,opacity:.5}).ready}).catch(errorHandler("ERR [creating image]:>"));env.on("ready",function(){ready.then(function(e){e._meshes.forEach(function(e){e.material.map.minFilter=THREE.LinearFilter}),e._elements.forEach(function(e){e.play()}),e.addTo(env.input.head).at(0,0,-.5),Preloader.hide()})});