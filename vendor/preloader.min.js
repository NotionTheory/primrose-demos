!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Preloader=t()}(this,function(){"use strict";function e(e,t){var n=new XMLHttpRequest;n.onload=function(){return t(n.response)},n.onprogress=o.thunk,n.open("GET",e),n.send()}function t(){if(document.body)if(window.DEBUG){if(l.length>0){var e=l.shift(),n=document.createElement("script");n.src=e,n.onload=t,document.body.appendChild(n)}}else{var o=document.createElement("script");o.innerHTML=l.join("\n"),document.body.appendChild(o)}else setTimeout(t,0)}function n(n,o,r){e(n,function(e){window.DEBUG?l[o]=n:l[o]=e,++i,i===r.length&&t()})}var o={bar:null,files:{},loaded:0,total:0,shrink:function(e){o.bar&&(o.bar.style.height=e)},hide:function(){o.bar&&(o.bar.style.display="none")},thunk:function(e){var t=e.target.responseURL||e.target.currentSrc;if(t){o.files[t]||(o.files[t]={});var n=o.files[t];if("number"==typeof e.loaded)n.loaded=e.loaded,n.total=e.total;else if(e.srcElement){for(var r=e.srcElement.buffered,a=Number.MAX_VALUE,l=Number.MIN_VALUE,i=0;i<r.length;++i)a=Math.min(a,r.start(i)),l=Math.max(l,r.end(i));n.loaded=1e3*l,n.total=1e3*e.srcElement.duration}}var d=0,s=0;for(var f in o.files){var u=o.files[f];s+=u.loaded,d+=u.total}o.loaded=s,o.total=d,o.bar||(o.bar=document.querySelector("progress")),o.bar&&d&&(o.bar.max=d,o.bar.value=s)}},r=document.querySelectorAll("script"),a=r[r.length-1],l=[],i=0;return a&&a.dataset.files&&a.dataset.files.split(",").forEach(n),o});